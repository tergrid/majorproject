/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
import r from"../config.js";import{id as t}from"../kernel.js";import{clone as e}from"../core/lang.js";import{urlToObject as i}from"../core/urlUtils.js";import{supportsApiKey as o}from"../support/apiKeyUtils.js";function n(r,t){return t?{...t,query:{...r??{},...t.query}}:{query:r}}function f(r){return"string"==typeof r?i(r):e(r)}function s(r,t,e){const i={};for(const o in r){if("declaredClass"===o)continue;const n=r[o];if(null!=n&&"function"!=typeof n)if(Array.isArray(n))i[o]=n.map((r=>s({item:r},t,e).item));else if("object"==typeof n)if(n.toJSON){const r=n.toJSON(e?.[o]);i[o]=t?r:JSON.stringify(r)}else i[o]=t?n:JSON.stringify(n);else i[o]=n}return i}function u(e,i){return e?o(e)&&(i||r.apiKey)?i||r.apiKey:t?.findCredential(e)?.token:null}export{n as asValidOptions,s as encode,u as getToken,f as parseUrl};
