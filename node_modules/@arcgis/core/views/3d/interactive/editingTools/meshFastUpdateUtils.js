/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
import{makeHandle as e}from"../../../../core/handleUtils.js";import{watch as t,syncAndInitial as r}from"../../../../core/reactiveUtils.js";import{isRelativeVertexSpace as o}from"../../../../geometry/support/meshVertexSpaceUtils.js";import{equals as s}from"../../../../geometry/support/spatialReferenceUtils.js";import{MeshTransformUpdateAction as i}from"../../../../layers/graphics/sources/interfaces.js";import{ViewingMode as n}from"../../../ViewingMode.js";function a(o,s){const{graphic:i}=o;return[t((()=>o.displaying),(e=>{e?c(i,s):p(i,s)}),{...r}),e((()=>p(i,s)))]}function c(e,t){const{geometry:r}=e;f(r,t)&&e.notifyMeshTransformChanged({action:i.EnableFastUpdates})}function p(e,t){const{geometry:r}=e;f(r,t)&&e.notifyMeshTransformChanged({action:i.DisableFastUpdates})}function f(e,{state:{viewingMode:t},spatialReference:r}){if("mesh"!==e?.type)return!1;const{vertexSpace:i,spatialReference:a}=e;if(!o(i))return!1;const{type:c}=i;return t===n.Global&&"local"===c||t===n.Local&&s(r,a)&&"georeferenced"===c&&!a.isGeographic}export{a as meshTransformFastUpdateHandles,p as tryDisableMeshTransformFastUpdates,c as tryEnableMeshTransformFastUpdates};
