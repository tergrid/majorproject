/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
import{colorVectorToColorAndOpacity as e}from"../../../core/colorUtils.js";import{invert as t}from"../../../core/libs/gl-matrix-2/math/mat4.js";import{f as r,b as o,e as n,n as c}from"../../../chunks/vec32.js";import{sv3d as i,sm4d as a}from"../../../geometry/support/vectorStacks.js";import{hydrateGeometry as l}from"../../../layers/graphics/hydratedFeatures.js";import{computeCentroid as s}from"../layers/graphics/graphicUtils.js";import{CullFaceOptions as u}from"../webgl-engine/lib/basicInterfaces.js";import{RenderOccludedFlag as m}from"../webgl-engine/lib/Material.js";import{ColorMaterial as p}from"../webgl-engine/materials/ColorMaterial.js";import{ShadedColorMaterial as g}from"../webgl-engine/materials/ShadedColorMaterial.js";function d(t,r=m.OccludeAndTransparent,o=!0){const n=e(t),c=!(t[3]<1);return o?new g({color:n,writeDepth:c,cullFace:u.Back,renderOccluded:r,isDecoration:!0}):new p({color:n,writeDepth:c,cullFace:u.Back,renderOccluded:r,isDecoration:!0})}function f(t,r=m.OccludeAndTransparent){const o=e(t);return new p({color:o,writeDepth:!0,cullFace:u.Front,renderOccluded:r,isDecoration:!0})}const h=Object.freeze({calloutLength:40,calloutWidth:1,discRadius:27,focusMultiplier:1.1}),j=Object.freeze({autoScaleRenderObjects:!1,worldSized:!0});function b(e,c,l,s){const u=r(i.get(),e,l),m=w(u,o(i.get(),s,u),l,a.get());t(m,m);const p=n(i.get(),c,m);return Math.atan2(p[1],p[0])}function w(e,t,r,n){const a=c(i.get(),e),l=c(i.get(),t),s=o(i.get(),a,l);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=0,n[4]=l[0],n[5]=l[1],n[6]=l[2],n[7]=0,n[8]=s[0],n[9]=s[1],n[10]=s[2],n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n}function O(e,t){const r=e.getViewForGraphic(t);return null!=r&&"computeAttachmentOrigin"in r?r.computeAttachmentOrigin(t,e.spatialReference):null}function y(e,t,r){const o=O(e,r);null==o?D(t,r.geometry):t.elevationAlignedLocation=o}function D(e,t){if(null==t)return;const r="mesh"===t.type?t.anchor:s(t);null!=r&&(e.location=l(r))}export{b as calculateInputRotationTransform,w as calculateTranslateRotateFromBases,d as createManipulatorMaterial,f as createManipulatorOutlineMaterial,O as getGraphicAttachmentOrigin,y as placeAtGraphic,h as rotateManipulatorDefaults,j as worldScaledManipulatorSettings};
