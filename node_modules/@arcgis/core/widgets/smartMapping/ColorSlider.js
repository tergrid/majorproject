/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
import{_ as e}from"../../chunks/tslib.es6.js";import{property as r}from"../../core/accessorSupport/decorators/property.js";import"../../core/has.js";import"../../core/Logger.js";import"../../core/RandomLCG.js";import{subclass as t}from"../../core/accessorSupport/decorators/subclass.js";import{SmartMappingSliderBase as i}from"./SmartMappingSliderBase.js";import s from"./ColorSlider/ColorSliderViewModel.js";import{globalCss as a}from"../support/globalCss.js";import{legacyIcon as o}from"../support/legacyIcon.js";import"../support/widgetUtils.js";import{messageBundle as l}from"../support/decorators/messageBundle.js";import{tsx as n}from"../support/jsxFactory.js";var d;const p="esri-color-slider",m={base:p,widgetIcon:o.edit,rampElement:`${p}__ramp`,sliderContainer:`${p}__slider-container`,histogramContainer:`${p}__histogram-container`,primaryHandle:`${p}--primary-handle`,track:`${p}--interactive-track`};let c=d=class extends i{constructor(e,r){super(e,r),this.messages=null,this.viewModel=new s,this._bgFillId=`${this.id}-bg-fill`,this._rampFillId=`${this.id}-linear-gradient`}get handlesSyncedToPrimary(){return this.viewModel.handlesSyncedToPrimary}set handlesSyncedToPrimary(e){this.viewModel.handlesSyncedToPrimary=e}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get primaryHandleEnabled(){return this.viewModel.primaryHandleEnabled}set primaryHandleEnabled(e){this.viewModel.primaryHandleEnabled=e}get stops(){return this.viewModel.stops}set stops(e){this.viewModel.stops=e}static fromRendererResult(e,r){const{visualVariable:{stops:t},statistics:i}=e,{avg:s,stddev:a}=i,o=e.renderer.authoringInfo.visualVariables.find((e=>"color"===e.type)),l=o.minSliderValue,n=o.maxSliderValue;return new d({max:n,min:l,stops:t,histogramConfig:{average:s,standardDeviation:a,bins:r?r.bins:[]},primaryHandleEnabled:"high-to-low"!==o.theme})}updateFromRendererResult(e,r){const{visualVariable:{stops:t},statistics:i}=e,{avg:s,stddev:a}=i,o=e.renderer.authoringInfo.visualVariables.find((e=>"color"===e.type)),l=o.minSliderValue,n=o.maxSliderValue;this.set({max:n,min:l,stops:t,histogramConfig:{average:s,standardDeviation:a,bins:r?r.bins:[]},primaryHandleEnabled:"high-to-low"!==o.theme})}render(){const{label:e,primaryHandleEnabled:r,state:t,visibleElements:i}=this,s="disabled"===t,o=this.classes(m.base,a.widget,a.panel,{[a.disabled]:s,[m.primaryHandle]:r,[m.track]:!!i.interactiveTrack});return n("div",{"aria-label":e,class:o},s?null:this.renderContent(this._renderRamp(),m.sliderContainer,m.histogramContainer))}_renderRamp(){const{_bgFillId:e,_rampFillId:r,viewModel:t,zoomOptions:i}=this,s=t.getStopInfo();return n("div",{class:m.rampElement},n("svg",{xmlns:"http://www.w3.org/2000/svg"},n("defs",null,this.renderRampFillDefinition(r,s),this.renderBackgroundFillDefinition(e)),n("rect",{fill:`url(#${e})`,height:"100%",width:"100%",x:"0",y:"0"}),n("rect",{fill:`url(#${r})`,height:"100%",width:"100%",x:"0",y:"0"})),i?this.renderZoomCaps():null)}};e([r()],c.prototype,"handlesSyncedToPrimary",null),e([r()],c.prototype,"label",null),e([r(),l("esri/widgets/smartMapping/ColorSlider/t9n/ColorSlider")],c.prototype,"messages",void 0),e([r()],c.prototype,"primaryHandleEnabled",null),e([r()],c.prototype,"stops",null),e([r()],c.prototype,"viewModel",void 0),c=d=e([t("esri.widgets.smartMapping.ColorSlider")],c);const h=c;export{h as default};
